<html>

<head>
  <link rel="stylesheet" href="/static/bootstrap.min.css">
  <link rel="stylesheet" href="/static/main.css">
  <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

</head>

<script>
  let map;
  function initMap() {
    map = new google.maps.Map(document.getElementById("map"), {
      center: {
        lat: 42.444,
        lng: -76.501
      },
      zoom: 15,
      mapId: "ca5c01778ebc0ac",
      // disableDefaultUI: true,
      streetViewControl: false,
      scaleControl: false,
      mapTypeControl: false
    });

    var markersArray = [];
    "{% if data %}"
    "{% for d in data %}"
    var myLatLng = { lat: parseFloat("{{d.gps[0]}}"), lng: parseFloat("{{d.gps[1]}}") }
    var marker = new google.maps.Marker({
      position: myLatLng,
      map,
      title: "{{d.name}}",
    });
    var contentString =
      '<p>{{d.name}}</p>';

    // Info window 
    var infowindow = new google.maps.InfoWindow({
      content: contentString,
    });
    marker.addListener("click", () => {
      infowindow.open(map, marker);
    });

    // Zoom to fit markers
    markersArray.push(marker);
    "    {% endfor %}"
    "    {% endif %}"
    var bounds = new google.maps.LatLngBounds();
    for (var i = 0; i < markersArray.length; i++) {
      bounds.extend(markersArray[i]);
    }
    map.fitBounds(bounds);
  }
</script>

<body>
  <div class="wrapper">
    <!-- <div class="map-wrapper"> -->
    <div id="map"></div>
    <!-- </div> -->
    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyArkKUMZfAd7LvEhIoHC6Asbhw9wmU3qJ0&map_ids=ca5c01778ebc0ac&callback=initMap&libraries=&v=weekly"
      async></script>
    <div class="content">
      <div class="card">
        <div class="container">
          <form class="form-inline global-search">

            <div class="col">
              <h1 style="font-size: 55px; font-family:Futura; color:forestgreen">
                Take a hike! </h1>
              <p>Hiking trail recommender for the Finger Lakes area</p>
              <p id="netid"> {{ netid }}</p>
            </div>

            <div class="col">
              <h4>KEYWORDS</h4>
              <input id="input" type="text" name="search" class="form-control"
                placeholder="Easy hiking trail with scenic waterfall view">

              <div id="toggles" class="display-row">
                <div class="display-row">
                  <div id="difficulty-toggle" class="col">
                    <h4>DIFFICULTY</h4>
                    <label for="difficulty"></label>
                    <select name="difficulty" id="difficulty-input" class="form-control">
                      <option disabled selected value>Select Difficulty</option>
                      <option value="easy">Easy</option>
                      <option value="moderate">Moderate</option>
                      <option value="hard">Hard</option>
                    </select>
                  </div>
                </div>

                <div id="access-toggle" class="col">
                  <h4>ACCESSIBILITY</h4>
                  <div class="toggle">
                    <input type="checkbox" id="accessible" name="requireAccessible" />
                    <label for="accessible"></label>

                    <input type="checkbox" id="freeentry" name="requireFreeEntry" />
                    <label for="freeentry"></label>

                    <input type="checkbox" id="bathroom" name="requireBathroom" />
                    <label for="bathroom"></label>
                  </div>
                </div>
              </div>
            </div>

            <div id="activity-toggle" class="col">
              <h4>ACTIVITY TYPE</h4>
              <div class="toggle">
                <input type="checkbox" id="walk" name="walkOn" />
                <label for="walk"></label>
                <input type="checkbox" id="hike" name="hikeOn" />
                <label for="hike"></label>
                <input type="checkbox" id="run" name="runOn" />
                <label for="run"></label>
                <input type="checkbox" id="bike" name="bikeOn" />
                <label for="bike"></label>
                <input type="checkbox" id="horse" name="horseOn" />
                <label for="horse"></label>
                <input type="checkbox" id="swim" name="swimOn" />
                <label for="swim"></label>
                <input type="checkbox" id="ski" name="skiOn" />
                <label for="ski"></label>
                <input type="checkbox" id="snowshoe" name="snowshoeOn" />
                <label for="snowshoe"></label>
              </div>
            </div>

            <div class="slidecontainer">
              <h4>MAXIMUM DISTANCE</h4>
              <div id="range" class="display-row">
                <p> 0 mi</p>
                <p> 5 mi</p>
              </div>
              <input type="range" name="setDistance" min="0" max="5" value="2" class="slider" id="setDistance">
            </div>

            <button type="submit" class="btn btn-info"> Find my next hike! </button>
        </div>
        </form>
      </div>


      <h3 class="form-inline">{{output_message}}</h3>
      <form class="">
        {% if data %}
        {% for d in data %}
        <br>
        <a href={{d.url}}>
          <div class="card result">
            <div class="trail-imgs">
              <img src={{d.img}} alt="Hiking Trail" class="trail-img" />
            </div>
            <div class="container col" id="results">
              <div class="trail-info">
                <div class="display-row vert-align">
                  <p id="name"><b>{{d.name}}</b></p>
                </div>
                <p id="length">{{d.length}} mi distance</p>
                <span id="attribute">good suggestion</span>
                <span id="attribute">bad suggestion</span>
                <p id="review">"{{ d.review }}"</p>
                <div class="activity-types">
                  <p id="difficulty-display">{{d.difficulty}}</p>
                  {% for activity in d.activity_types %}
                  <img src={{activity}} alt="activity icon" id="activity-type" />
                  {% endfor %}
                  <div id="attributes" class="display-row">
                    {% for attribute in d.attributes %}
                    <p id="attribute">{{ attribute }}</p>
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
        </a>
    </div>
    {% endfor %}
    {% endif %}
    </form>
  </div>
  </div>
  </div>

</body>

</html>